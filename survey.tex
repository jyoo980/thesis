%% The following is a directive for TeXShop to indicate the main file
%%!TEX root = diss.tex

\newcommand{\numStarted}{103}
\newcommand{\numFinished}{69}
\newcommand{\writeCodeDaily}{59}
\newcommand{\writeCodeTwoDays}{9}
\newcommand{\writeCodeOnceMonth}{1}

% Respondent numbers by Country
\newcommand{\canada}{21}
\newcommand{\usa}{21}
\newcommand{\germany}{8}
\newcommand{\russia}{8}
\newcommand{\uk}{2}

% YoE as percentages
\newcommand{\zeroToTwo}{26.09}
\newcommand{\twoToFive}{30.43}
\newcommand{\fiveToSeven}{11.59}
\newcommand{\sevenPlus}{31.88}

% Language usage percentages
\newcommand{\java}{14.49}
\newcommand{\kotlin}{13.04}
\newcommand{\python}{14.49}
\newcommand{\cpp}{11.59}
\newcommand{\typescript}{11.59}
\newcommand{\other}{34.80}

\chapter{Survey}
\label{ch:Survey}

\noindent We deployed a survey to investigate the type and frequency of
reachability questions that developers may encounter during their day-to-day 
activities.

\section{Method}
\label{sec:method}

\noindent The survey was developed with the goal of maximizing the relevance of 
the presented questions to actual scenarios that developers would encounter in
their day-to-day work.
We drew upon our previous work as software developers as well as the literature
for reachability questions \cite{latoza-2010-reach} and hard-to-answer
questions about code that developers ask \cite{latoza-2010-hard-questions}.
From these sources, we drafted a set of 10 questions that we hypothesized 
developers may ask as they performed change tasks or explored their programs.

\par After piloting the survey in a laboratory setting with 7 graduate
students, we finalized a survey with 9 questions with corresponding code
excerpts with a time-to-completion of about 10 minutes.
The survey was deployed entirely online, and consisted of:
\begin{itemize}
    \item 5 demographic questions.
    \item 9 Likert-scale questions that each represented a hypothetical 
          scenario associated with a program comprehension or reachability 
          question.
\end{itemize}

The full text of the survey that includes all code excerpts as presented to
our respondents is available.
% TODO: upload a copy of the survey here.

\subsection{Participant Recruitment}
\label{subsec:ParticipantRecruitment}

\noindent
We distributed the survey on Twitter using our personal accounts.
In addition to Twitter, the survey was distributed using mailing lists to
professional software developers.

% TODO: come back to this once we can actually say more about  what we  build
\par As our tool in its current state is targeted toward developers who
use statically-typed programming languages, we excluded respondents who have
never used a statically-typed language as their primary development language.
We also excluded individuals who do not write code at least once a month,
as they may not be the primary audience for an eventual tool.

\section{Survey Results}
\label{sec:SurveyResults}

The survey was started \numStarted{} times, and finished \numFinished{} times
in total. 
This yielded a survey completion rate of \printpcnt{\numFinished}{\numStarted}.
First, we describe the demographics of the respondents to our survey, exploring
their experience as software developers and the programming language(s) used
in their day-to-day work. 
We summarize the years of development experience, the most frequently
used programming language, and the range of sizes of the companies that employ
our respondents in Table \ref{tab:Demographics}.
We then use these results to inform our analysis of our respondents' experience
with reachability questions.

\subsection{Demographics}
\label{subsec:Demographics}

Most of our respondents were located in North America, including Canada 
(\canada{})
and the United States (\usa{}).
The second-largest majority of our respondents came from Europe, including
Germany (\germany{}), Russia (\russia{}), and the United Kingdom (\uk{}).
The rest of our respondents came from wider range of countries in the APAC
region and South America; more details are available in a supplementary data 
archive.
% TODO: create data archive, link to it.
$\sim$\printpcnt{\writeCodeDaily}{\numFinished} of respondents reported 
writing code every day; the remainder reported writing code at least twice a
week, or once a month.

\par Many of our respondents had over seven years' worth of development 
experience (\sevenPlus{}\%), while \twoToFive\% of respondents had two to five 
years' worth of experience. 
The remainder of the respondents had zero to two, or five to seven years' worth
of total experience (Table \ref{tab:Demographics}).

\par A total of 15 unique programming languages were reported as being used by
our respondents.
The programming languages that were used most frequently by our
respondents included Java, Kotlin, Python, C and C++, and TypeScript (Table
\ref{tab:Demographics}). 
Although other languages used by our respondents compose a large number of 
results (34.33\%), they are generally composed of statically-typed languages
including Swift, C\#, and Objective-C.
A more detailed enumeration is available in the supplementary data archive.

\par A majority of our respondents reported being employeed at companies that
have more than 1000 employees (59.42\%).
20.29\% of respondents reported working at a company with less than 100
employees, and the remaining 20.29\% of respondents reported working at
companies that had a range of 100 to 1000 employees.

\begin{table}[ht]
\centering
\caption{Respondent demographics}
\label{tab:Demographics}
\begin{tabular}{@{}lr@{}}
\toprule
\multicolumn{2}{c}{\textbf{Demographics}}        \\ \midrule
\multicolumn{2}{l}{\textbf{Years of Experience}} \\
\rowcolor{Gray}
0 - 2 years                & \zeroToTwo\%        \\
2 - 5 years                & \twoToFive\%        \\
\rowcolor{Gray}
5 - 7 years                & \fiveToSeven\%      \\
Over 7 years               & \sevenPlus\%        \\
\multicolumn{2}{l}{\textbf{Programming language used most frequently}} \\ 
\rowcolor{Gray}
Java                       & \java\%       \\
Kotlin                     & \kotlin\%     \\
\rowcolor{Gray}
Python                     & \python\%     \\
C/C++                      & \cpp\%        \\
\rowcolor{Gray}
TypeScript                 & \typescript\% \\
Other                      & \other\%      \\
% TODO: I really dislike the table heading here... think of a better one.
\multicolumn{2}{l}{\textbf{Number of employees in company}} \\
\rowcolor{Gray}
Over 5000                  & 26.09\% \\
1000 - 4999                & 33.33\% \\
\rowcolor{Gray}
500 - 999                  &  7.25\% \\
100 - 499                  & 13.04\% \\
\rowcolor{Gray}
Less than 100              & 20.29\% \\
\bottomrule
\end{tabular}
\end{table}

\subsection{Quantitative Results}
\label{subsec:QuantitativeResults}

Figure \ref{fig:SurveyResults} presents the collection of responses to the
9 questions asked in our survey.
Respondents were asked to evaluate how often they asked themselves each question
on a 5-point Likart scale, with labels ranging from ``I never ask myself 
this question," to ``I often ask myself this question."

\par Each question was assigned a code that represented to which category of
reachability or program comprehension question they belonged to in
Table \ref{Table:QuestionCodes}.
The codes we created (Table \ref{Table:SurveyCoding}) included \textit{find} 
and \textit{compare} reachability questions \cite{latoza-2010-reach}, general 
program comprehension questions across control-flow paths, as well as questions 
that we deemed as being invalid in our study due to their imperfect mapping to 
a reachability or program comprehension question. 

\input{survey-coding}

\begin{figure}[ht]
\centering
\caption{Responses for each development question}
\input{survey-results}
\label{fig:SurveyResults}
\end{figure}

\par An analysis of our responses showed that Development Questions 1, 2, 5,
and 9 were asked with the highest frequency by our respondents.
Question 2 was found to not map coherently to the reachability and program
comprehension questions under investigation in our study, and was excluded
from futher analysis.
Questions 1 and 2 represented different instances of the \textit{find} category 
of reachability questions, while Question 9 was an instance of a program
comprehension question that made use of program traces.

% TODO: explain more about the questions in detail.

% TODO: be careful with the language here, continue this.

\section{Threats to Validity}
\label{sec:ThreatsToValidity}

% Previously: External Validity

\noindent One of the ways which we distributed our survey was via Twitter.  
This means that part of our results may be specific to the responses of
software developers who use Twitter.
Consequently, it may be challenging to fully generalize our results across
the general population of developers who may not use Twitter.
In an attempt to minimize this threat to validity, we also distributed the 
survey using mailing lists to professional software developers, under the
assumption that most professional software developers use email
\cite{gousios-2016-work-practices}.

% Previously: Construct Validity

\par To create a set of survey questions that would closely represent the
questions and scenarios that developers reported to be most challenging
\cite{latoza-2010-hard-questions, latoza-2010-reach}, we designed a small Java
project represening an e-commerce system.
The Java methods presented in each survey question may not be entirely
representative of the actual code and systems that the respondents may have
experience with.
We deemed this to be an acceptable threat, as the code excerpts we drew from
the sample project were writen to distill the core concepts behind
reachability and program comprehension questions into a succinct representation.
Having overly-complicated code excerpts may have impacted the study by
increasing time-to-completion and drop rate.

\par The code excerpts in our survey were static elements, meaning that the
only way our participants could interact with the code was to read them
in isolation.
Although this furthered our design goal of making the questions encompass
the core concepts behind reachability questions, it did not accurately
capture how developers interact with code (e.g., IDE-based navigation, 
other workflows and tooling) in program comprehension tasks.
To mitigate this threat, we may have had to design our survey around an IDE 
that our participants would be able to use.
However, it is likely that this would have introduced another threat to
validity; our results may be affected by the proficiency of our participants
with the IDE we select to use in our study.
Consequently, we deemed the lack of interactable code excerpts to be an 
acceptable threat.

\par Another threat to validity is the fact that all the code
excerpts included in our survey were written in Java.
This does not account for the fact that our participants may have varying
levels of proficiency with Java.
Consequently, we may be conflating our results with the proficiency of our
participants with Java.
That being said, we needed to select a language for our study that would
have a high likelihood of being familiar to our target audience.
Java's popularity as a development language 
\cite{so-2021-dev-survey, jetbrains-2021-dev-survey} meant that it was a 
suitable choice.

\endinput

